# Stream Computing Overview

EnOS™ Stream Computing targets to meet the real-time data processing requirements of user devices and assets.

Powered by Apache Spark™ Streaming with Envision’s customization and optimization, the EnOS stream data processing engine offers high scalability, high throughput, and high fault-tolerance.

The stream computing service provides unified templates and a GUI to enable developers to customize a real-time data processing flow by dragging and dropping the function modules.

## What Are Streaming Data?

Broadly speaking, the generation of data can be considered as a series of discrete events. When drawing these discrete events on a time axis, an event stream or data stream is formed. Streaming data consist of these endless event streams.

Both offline data and streaming data are normally sent as logs. Unlike traditional offline data, streaming data are generated continuously by a lot of data sources. However, the size of the streaming data is normally smaller than that of the offline data.

The common sources of streaming data can be the devices connected to a data center, the telemetry data of devices, and the log files generated by mobile or Web applications.

## What Is Stream Computing?

In general, stream computing has the following characteristics:

**Real-time and unbounded data streaming**

The computation faced by the engine is real-time and streaming, and the data streams are subscribed and consumed by stream computing in chronological order.

Because the data are generated continuously, the data stream is integrated to the streaming system continuously. For example, website access log is a type of streaming data, the log continuously records the data as long as the website is online. Thus, the streaming data are always real-time and unbounded data.

**Continuous and efficient computation**

The computation models of stream computing are "event triggered". The trigger is the unbounded streaming data mentioned in the above section. Once new streaming data are sent to the system, the system immediately initiates and performs a computation task. Therefore, the stream computing is a continuous process.

**Streaming and real-time data integration**

The result of stream computing triggered by streaming data is recorded directly into the destination data storage. For example, the data can be directly written into the relational database (RDS) for report rendering. Therefore, the computing results of the streaming data are continuously recorded into the target data storage.

  ## When Is Stream Computing Needed?

  Stream computing can be used for the following scenarios:

- Computation of device states

  In some business scenarios, you might need to obtain certain state parameters of a device to confirm its status. You might want to program under the following circumstances:

  * The original measure points do not directly provide the needed data.
  * The business scenario is relatively complex, and the values of multiple measure points need to be considered comprehensively.

- Aggregating and calculating site information

## Considerations for Stream Computing

The stream computing framework maintains the state of devices and sites internally. The information is updated in real time according to the telemetry data.

- The system updates both the measure point values and the device connection status to the latest state.
- The update frequency depends on the acquisition and upload frequency of the measure points.

If a device is not connected, it means that the measure point of the device is not updated.

## Key Concepts of EnOS Stream Computing

  The following concepts are used in designing a customized stream computing pipeline:

  -   **Batch Size**: Apache Spark™ Streaming is a stream computing engine based on micro-batch model and processes data at the interval of batch size, which determines how often a stream computing task gets the data.
  -   **Point Calculator**: The abstraction of the raw data acquisition points and user-defined computation points.
  -   **Window**: Windowing is simply the notion of taking a data source and chopping it up along temporal boundaries into finite chunks for processing.  
  -   **Processing Strategy**:  Unified window aggregation scheme for the AI data of the same device model, which consists of an input point, output point, threshold, interpolation strategy, algorithm, and window size. 

## Data Processing Flow of EnOS Stream Computing

The procedure of EnOS stream computing is as follows:

1. Processing of raw data

   Original measure point data are sent to Kafka through the EnOS connection layer. The messages received are analyzed by the stream computing process of measure points. Before processing, data are filtered by the specified threshold. Data exceeding the threshold will be processed by interpolation algorithm. 

2. Performing calculation

   In this step, data are calculated by the defined algorithm in the processing strategy.

3. Output of computing

   The data from the stream module flows into Redis and Kafka, and the downstream continues to subscribe all data from Kafka and record them to time series database (TSDB) and Hadoop distributed file system (HDFS). By default, data of the latest three months are reserved in TSDB to support real-time queries through the EnOS API, and the data in HDFS is used as the data source for offline data processing and further processing and analysis.
